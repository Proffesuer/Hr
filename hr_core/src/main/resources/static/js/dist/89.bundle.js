(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{190:function(t,e){function i(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}i.keys=function(){return[]},i.resolve=i,t.exports=i,i.id=190},284:function(t,e,i){var s=i(340);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,i(21).default)("6bfb70fe",s,!1,{})},338:function(t,e,i){"use strict";(function(t){var s=i(211);const a=i(212).Stomp;e.a={formatToCurrency:function(t){return t.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")},formattedTime:function(){return t(value).format("LT")},formattedDate:function(){return t(value).format("LLL")},sockJsConnection:function(){let t=new s("/web-chat");return a.over(t)},registerServiceWorker:()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then((function(t){console.log("ServiceWorker registration successful with scope: ",t.scope)}),(function(t){console.log("ServiceWorker registration failed: ",t)}))},unregisterServiceWorker:function(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(t=>{t.unregister()})}}}).call(this,i(189))},339:function(t,e,i){"use strict";i(284)},340:function(t,e,i){(t.exports=i(20)(!1)).push([t.i,".navbar-item .profile-image[data-v-e2089558]{height:36px;width:36px;max-height:36px}.toggle-mobile-nav[data-v-e2089558]{background-color:transparent;border:0px;padding:6px 16px;margin:0 0 0 -15px;height:46px}.menu-wrapper[data-v-e2089558]{overflow-y:scroll;position:relative;height:100%;margin-top:2rem}.side-menu-portal-target[data-v-e2089558]{display:revert}\n",""])},450:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"h-full"},[e("nav",{staticClass:"navbar is-fixed-top is-primary",attrs:{role:"navigation","aria-label":"main navigation"}},[e("div",{staticClass:"navbar-menu",attrs:{id:"navbarBasicExample"}},[e("div",{staticClass:"navbar-start"},[e("router-link",{staticClass:"navbar-item",attrs:{to:"/"}},[t._v("\n          Home\n        ")])],1),t._v(" "),e("div",{staticClass:"navbar-end"},[e("a",{ref:"notification-toggle",staticClass:"navbar-item is-hoverable is-relative",on:{click:function(e){t.showNotifications=!0}}},[e("i",{staticClass:"fa fa-bell"}),t._v(" "),t.showNotifications?e("NotificationDropDown",{directives:[{name:"closable",rawName:"v-closable",value:{exclude:["notification-toggle"],handler:"hideNotifications"},expression:"{\n  exclude: ['notification-toggle'],\n  handler: 'hideNotifications'\n}"}]}):t._e()],1),t._v(" "),e("router-link",{staticClass:"navbar-item",attrs:{to:"/messaging"}},[e("i",{staticClass:"fa fa-envelope"})]),t._v(" "),e("div",{staticClass:"navbar-item"},[e("LogoutForm")],1),t._v(" "),e("div",{staticClass:"navbar-item has-dropdown is-hoverable"},[t._m(0),t._v(" "),e("div",{staticClass:"navbar-dropdown is-right"},[e("a",{staticClass:"navbar-item"},[e("article",{staticClass:"media"},[t._m(1),t._v(" "),e("div",{staticClass:"media-content"},[e("div",{staticClass:"content"},[e("p",[e("strong",[t._v(t._s(t.authenticatedUser.fullName))])])])])])]),t._v(" "),e("router-link",{staticClass:"navbar-item",attrs:{to:"/profile"}},[t._v("\n              Profile\n            ")]),t._v(" "),e("router-link",{staticClass:"navbar-item",attrs:{to:"/settings"}},[t._v("\n              Settings\n            ")]),t._v(" "),e("a",{staticClass:"navbar-item",on:{click:function(e){t.showChangePassword=!0}}},[t._v("\n              Change Password\n            ")]),t._v(" "),e("a",{staticClass:"navbar-item"},[t._v("\n              Logout\n            ")])],1)])],1)])]),t._v(" "),t.showChangePassword?e("PasswordResetForm",{on:{close:function(e){t.showChangePassword=!1}}}):t._e(),t._v(" "),e("router-view")],1)};s._withStripped=!0;i(182),i(81);var a=i(183),o=i.n(a),n=i(188),r=i.n(n),c=function(){var t=this._self._c;return t("b-tooltip",{attrs:{label:"logout",type:"is-dark",position:"is-left"}},[t("form",{ref:"logoutForm",attrs:{method:"post",action:"/logout"}},[t("input",{attrs:{type:"hidden",name:"_csrf"},domProps:{value:this.csrfToken}}),this._v(" "),t("i",{staticClass:"fa fa-sign-out fa-2x",on:{click:this.logout}})])])};c._withStripped=!0;var l={data:()=>({csrfToken:null}),created(){this.csrfToken=document.querySelector("meta[name='_csrf']").getAttribute("content")},methods:{logout(){this.$refs.logoutForm.submit()}}},u=i(14),d=Object(u.a)(l,c,[],!1,null,null,null).exports,f=i(22),v=i(338);function p(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function g(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?p(Object(i),!0).forEach((function(e){r()(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}let b;var h={props:{user:{}},components:{PasswordResetForm:()=>Promise.all([i.e(0),i.e(88)]).then(i.bind(null,544)),NotificationDropDown:()=>Promise.all([i.e(0),i.e(45)]).then(i.bind(null,492)),LogoutForm:d},data:()=>({showNotifications:!1,isFullPage:!0,showChangePassword:!1,loading:!1}),computed:g({},Object(f.c)(["authenticatedUser"])),methods:g(g({},Object(f.b)(["setUser","setChatMessage"])),{},{hideNotifications(){this.showNotifications=!1},handleSockJsSubscriptions(t){let e=this;t.connect({},(function(i){t.subscribe("/user/queue/notifications",(function(t){JSON.parse(t.body);o.a.success(t.body)})),t.subscribe("/user/topic/notifications",(function(t){o.a.info(t.body)})),t.subscribe("/user/queue/chat-messages",(function(t){"MESSAGE"==t.command&&e.setChatMessage(JSON.parse(t.body))})),t.subscribe("/swat-chat/user-notifications-me",(function(t){o.a.info(t.body)}))}),(function(){window.setTimeout((function(){let t=v.a.sockJsConnection();e.handleSockJsSubscriptions(t)}),2e3)}))}}),created(){let t=this;v.a.registerServiceWorker(),firebaseUtil.askForPermissionToReceiveNotifications().then(t=>{console.log("Firebase subscription token is dashboard",t),t&&firebaseUtil.subscribeToFirebaseMessages(t)});try{let e=v.a.sockJsConnection();t.handleSockJsSubscriptions(e)}catch(t){}this.setUser(JSON.parse(this.user))},directives:{closable:{bind(t,e,i){b=s=>{s.stopPropagation();const{handler:a,exclude:o}=e.value;let n=!1;o.forEach(t=>{if(!n){const e=i.context.$refs[t];n=e.contains(s.target)}}),t.contains(s.target)||n||i.context[a]()},document.addEventListener("click",b),document.addEventListener("touchstart",b)},unbind(){document.removeEventListener("click",b),document.removeEventListener("touchstart",b)}}}},m=(i(339),Object(u.a)(h,s,[function(){var t=this._self._c;return t("figure",{staticClass:"image is-fullwidth navbar-link"},[t("img",{staticClass:"is-rounded profile-image",attrs:{src:"/images/undraw_profile_pic_ic-5-t.svg"}})])},function(){var t=this._self._c;return t("figure",{staticClass:"media-left"},[t("p",{staticClass:"image is-32x32"},[t("img",{staticClass:"is-rounded",attrs:{src:"/images/undraw_profile_pic_ic-5-t.svg"}})])])}],!1,null,"e2089558",null));e.default=m.exports}}]);