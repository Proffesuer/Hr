(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{263:function(t,e,s){var i=s(351);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,s(23).default)("263a95a3",i,!0,{})},350:function(t,e,s){"use strict";var i=s(263);s.n(i).a},351:function(t,e,s){(t.exports=s(22)(!1)).push([t.i,".card-content[data-v-ddbedc6c]{padding:1.5rem 15rem}.logo-input[data-v-ddbedc6c]{min-height:50px}\n",""])},449:function(t,e,s){"use strict";s.r(e);s(165),s(75);var i=s(166),a=s.n(i),n=(s(173),s(174)),r=s.n(n),o=(s(175),s(176)),l=s.n(o),c=s(35),d={name:"EmailSettingsForm",components:{Select:l.a,Option:r.a},mixins:[c.a],data:()=>({setting:{id:"",prefix:"",logoUrl:null},logoPreview:"/images/placeholder.jpg",isLoading:!1}),created(){this.getSettings()},computed:{disableSubmitButton(){let t=this.setting;return t.prefix.length<=0||null===t.logoUrl||this.isLoading}},methods:{getSettings(){let t=this;axios.get("/api/settings/invoice").then(e=>{e.data.length>0&&(t.setting=e.data)})},submit(){let t=this,e=new FormData;e.append("id",t.setting.id),e.append("prefix",t.setting.prefix),e.append("logoUrl",t.setting.logoUrl),t.isLoading=!0,axios.post("/api/settings/invoice/update",e).then(e=>{t.isLoading=!1,"00"===e.data.status?a.a.success(e.data.msg):a.a.error(e.data.msg),t.getSettings()},e=>{400===e.response.status?this.errors=e.response.data:a.a.error("Something went wrong. Contact Admin"),t.isLoading=!1})},onFileSelected(t){this.setting.logoUrl=t.target.files[0],this.updatePreview(t)},updatePreview(t){let e,s=this,i=t.target.files;e=new FileReader,e.onload=t=>{s.logoPreview=t.target.result},e.readAsDataURL(i[0])}}},u=(s(350),s(15)),p=Object(u.a)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card animated preFadeInUp fadeInUp"},[s("div",{staticClass:"card-content"},[s("h1",{staticClass:"has-text-weight-bold flex justify-center is-size-4 pb-4"},[t._v("Invoice Settings")]),t._v(" "),s("div",{staticClass:"field"},[s("div",{staticClass:"columns"},[t._m(0),t._v(" "),s("div",{staticClass:"column"},[s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.setting.prefix,expression:"setting.prefix"}],staticClass:"input",attrs:{type:"text"},domProps:{value:t.setting.prefix},on:{input:[function(e){e.target.composing||t.$set(t.setting,"prefix",e.target.value)},function(e){return t.clearFieldError("prefix")}]}}),t._v(" "),t.errors.prefix?s("span",{staticClass:"mb-2 has-text-danger"},[t._v("\n\t\t\t\t\t\t        "+t._s(t.errors.prefix[0])+"\n\t\t\t\t\t        ")]):t._e()])])]),t._v(" "),s("div",{staticClass:"columns"},[t._m(1),t._v(" "),s("div",{staticClass:"column"},[s("div",{staticClass:"control"},[s("input",{ref:"logoInput",staticClass:"hidden",attrs:{type:"file"},on:{input:function(e){return t.clearFieldError("logoUrl")},change:t.onFileSelected}}),t._v(" "),s("img",{staticClass:"logo-input border-2",attrs:{src:t.logoPreview},on:{click:function(e){return e.preventDefault(),t.$refs.logoInput.click()}}}),t._v(" "),t.errors.logoUrl?s("span",{staticClass:"has-text-danger"},[t._v("\n                                            "+t._s(t.errors.logoUrl[0]))]):t._e()])])])]),t._v(" "),s("div",{staticClass:"flex justify-end"},[s("button",{staticClass:"button is-rounded p-2",class:{"is-loading":t.isLoading},attrs:{disabled:t.disableSubmitButton},on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[t._v("\n          Submit\n        ")])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"column"},[e("label",{staticClass:"label "},[this._v("Invoice Prefix "),e("span",[e("sup",[this._v("*")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"column"},[e("label",{staticClass:"label "},[this._v("Invoice Logo "),e("span",[e("sup",[this._v("*")])])])])}],!1,null,"ddbedc6c",null);e.default=p.exports}}]);