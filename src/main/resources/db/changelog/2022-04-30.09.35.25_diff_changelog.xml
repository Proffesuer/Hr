<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:pro="http://www.liquibase.org/xml/ns/pro" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.6.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd">
    <changeSet author="user (generated)" id="1651311344897-3">
        <createTable tableName="address_book_contacts">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="address_book_contactsPK"/>
            </column>
            <column name="created_at" type="datetime(6)"/>
            <column name="email" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(255)"/>
            <column name="phone_no" type="VARCHAR(255)"/>
            <column name="type" type="VARCHAR(255)"/>
            <column name="updated_at" type="datetime(6)"/>
            <column name="created_by_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-4">
        <createTable tableName="attendance">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="attendancePK"/>
            </column>
            <column name="attendance_time" type="datetime(6)"/>
            <column name="created_at" type="datetime(6)"/>
            <column name="type" type="VARCHAR(255)"/>
            <column name="updated_at" type="datetime(6)"/>
            <column name="employee_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-5">
        <createTable tableName="chat_group_members">
            <column name="chat_group_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="members_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-6">
        <createTable tableName="chat_groups">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="chat_groupsPK"/>
            </column>
            <column name="created_at" type="datetime(6)"/>
            <column name="name" type="VARCHAR(255)"/>
            <column name="updated_at" type="datetime(6)"/>
            <column name="created_by_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-7">
        <createTable tableName="employee_promotion">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="employee_promotionPK"/>
            </column>
            <column name="created_at" type="datetime(6)"/>
            <column name="promotion_date" type="datetime(6)"/>
            <column name="updated_at" type="datetime(6)"/>
            <column name="employee_id" type="BIGINT"/>
            <column name="from_id" type="BIGINT"/>
            <column name="to_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-8">
        <createTable tableName="file_metadata">
            <column name="extension" type="VARCHAR(255)"/>
            <column name="file_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="file_metadataPK"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-9">
        <createTable tableName="files">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="filesPK"/>
            </column>
            <column name="created_at" type="datetime(6)"/>
            <column name="name" type="VARCHAR(255)"/>
            <column name="type" type="VARCHAR(255)"/>
            <column name="updated_at" type="datetime(6)"/>
            <column name="parent_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-10">
        <addColumn tableName="chat_messages">
            <column name="chat_group_id" type="bigint"/>
        </addColumn>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-11">
        <addColumn tableName="jobs">
            <column name="department_manager_id" type="bigint"/>
        </addColumn>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-12">
        <addColumn tableName="department_policies">
            <column name="departments_manager_id" type="bigint">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-13">
        <addColumn tableName="events">
            <column name="end_date" type="datetime(6)"/>
        </addColumn>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-14">
        <addColumn tableName="departments">
            <column name="manager_id" type="bigint">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-15">
        <addColumn tableName="departments">
            <column name="parent_manager_id" type="bigint"/>
        </addColumn>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-16">
        <createIndex indexName="IX_departmentsPK" tableName="departments" unique="true">
            <column name="manager_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-17">
        <addForeignKeyConstraint baseColumnNames="manager_id" baseTableName="departments" constraintName="FK56q3esufky8u69xbmo4n63c4r" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="employees" validate="true"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-18">
        <addForeignKeyConstraint baseColumnNames="department_id" baseTableName="designations" constraintName="FK5kgb0o61xcwqr3scbtopsca3p" deferrable="false" initiallyDeferred="false" referencedColumnNames="manager_id" referencedTableName="departments" validate="true"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-19">
        <addForeignKeyConstraint baseColumnNames="to_id" baseTableName="employee_promotion" constraintName="FKa2uopaqtgu5t2wq7c4h9i9k6h" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="designations" validate="true"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-20">
        <addForeignKeyConstraint baseColumnNames="parent_manager_id" baseTableName="departments" constraintName="FKahe1ghlv4ywumo6r866me9mca" deferrable="false" initiallyDeferred="false" referencedColumnNames="manager_id" referencedTableName="departments" validate="true"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-21">
        <addForeignKeyConstraint baseColumnNames="employee_id" baseTableName="attendance" constraintName="FKb48lmkou5j4rvde9sr88bqgjw" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="employees" validate="true"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-22">
        <addForeignKeyConstraint baseColumnNames="chat_group_id" baseTableName="chat_messages" constraintName="FKdjgeu89v45u4vx4uydldkfwyb" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="chat_groups" validate="true"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-23">
        <addForeignKeyConstraint baseColumnNames="employee_id" baseTableName="employee_promotion" constraintName="FKdn9b6jwnt8xvcwonitbc3murp" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="employees" validate="true"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-24">
        <addForeignKeyConstraint baseColumnNames="department_id" baseTableName="employees" constraintName="FKgy4qe3dnqrm3ktd76sxp7n4c2" deferrable="false" initiallyDeferred="false" referencedColumnNames="manager_id" referencedTableName="departments" validate="true"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-25">
        <addForeignKeyConstraint baseColumnNames="file_id" baseTableName="file_metadata" constraintName="FKhxsftvp813rshxc81fx6lf20q" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="files" validate="true"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-26">
        <addForeignKeyConstraint baseColumnNames="members_id" baseTableName="chat_group_members" constraintName="FKldu5l6iedk1sq9639kvr8rn8t" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="users" validate="true"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-27">
        <addForeignKeyConstraint baseColumnNames="chat_group_id" baseTableName="chat_group_members" constraintName="FKlvoe5sok23sdg7lcf8cyncj0n" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="chat_groups" validate="true"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-28">
        <addForeignKeyConstraint baseColumnNames="department_manager_id" baseTableName="jobs" constraintName="FKmn3lghg3sd3bqlywu7st4arof" deferrable="false" initiallyDeferred="false" referencedColumnNames="manager_id" referencedTableName="departments" validate="true"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-29">
        <addForeignKeyConstraint baseColumnNames="created_by_id" baseTableName="address_book_contacts" constraintName="FKoc77oiscr1rd1sgv83ddlmqyt" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="users" validate="true"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-30">
        <addForeignKeyConstraint baseColumnNames="parent_id" baseTableName="files" constraintName="FKod0go0ye9ao1yql0nj9hs0k78" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="files" validate="true"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-31">
        <addForeignKeyConstraint baseColumnNames="from_id" baseTableName="employee_promotion" constraintName="FKp5900m9yd2qrgu1r3ndxphxy3" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="designations" validate="true"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-32">
        <addForeignKeyConstraint baseColumnNames="departments_manager_id" baseTableName="department_policies" constraintName="FKrp3sx5h2kb11uwrw6qstatlru" deferrable="false" initiallyDeferred="false" referencedColumnNames="manager_id" referencedTableName="departments" validate="true"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-33">
        <addForeignKeyConstraint baseColumnNames="created_by_id" baseTableName="chat_groups" constraintName="FKsm7knvk2vdobxuck5q616v16i" deferrable="false" initiallyDeferred="false" referencedColumnNames="id" referencedTableName="users" validate="true"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-34">
        <dropForeignKeyConstraint baseTableName="designations" constraintName="FK5kgb0o61xcwqr3scbtopsca3p"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-35">
        <dropForeignKeyConstraint baseTableName="employees" constraintName="FKgy4qe3dnqrm3ktd76sxp7n4c2"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-36">
        <dropForeignKeyConstraint baseTableName="department_policies" constraintName="FKr32h8gvws3vhpm22pn11quqlx"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-37">
        <dropForeignKeyConstraint baseTableName="jobs" constraintName="FKt27140un7et9j2mqcevbh4shk"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-38">
        <dropColumn columnName="id" tableName="departments"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-39">
        <dropColumn columnName="department_id" tableName="jobs"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-40">
        <dropColumn columnName="departments_id" tableName="department_policies"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-1">
        <dropPrimaryKey tableName="departments"/>
    </changeSet>
    <changeSet author="user (generated)" id="1651311344897-2">
        <addPrimaryKey columnNames="manager_id" constraintName="departmentsPK" tableName="departments"/>
    </changeSet>
</databaseChangeLog>
