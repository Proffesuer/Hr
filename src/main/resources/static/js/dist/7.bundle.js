(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{139:function(t,e,s){"use strict";var a=s(97).a,i=s(2),n=Object(i.a)(a,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-white"},[t.showEmptyState?s("EmptyState",[s("h4",{staticClass:"ml-10"},[t._v("Leave request has no history")])]):t._e(),t._v(" "),s("div",{staticClass:"is-size-7 "},t._l(t.leaveRequestHistory,function(e){return s("div",{staticClass:"bg-white p-5 h-full w-full"},[s("div",{staticClass:"flex flex-col"},[s("h4",{staticClass:"pl-1"},[t._v(t._s(e.leaveStatuses))]),t._v(" "),s("span",[t._m(0,!0),s("span",[s("span",{staticClass:"has-text-primary"},[t._v("Performed On : ")]),t._v(t._s(t._f("dateFormat")(e.createdAt)))]),t._v(" "),t._m(1,!0),s("span",[s("span",{staticClass:"has-text-primary"},[t._v("Performed By: ")]),t._v(t._s(e.user.firstName))])])])])}),0)],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-calendar"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"icon"},[e("i",{staticClass:"fa fa-user"})])}],!1,null,null,null);e.a=n.exports},162:function(t,e,s){"use strict";s.r(e);var a=s(96).a,i=s(2),n=Object(i.a)(a,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"is-size-7 h-full"},[s("div",{staticClass:"flex justify-end"},[s("router-link",{attrs:{tag:"a",to:"/leave-approvals"}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-angle-left"})]),t._v(" "),s("span",[t._v("Back To List")])])],1),t._v(" "),s("div",{staticClass:"relative bg-white mt-5 p-5"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("h4",{staticClass:"has-text-black"},[t._v("Employee Name")]),t._v(" "),s("h4",{staticClass:"has-text-grey-light"},[t._v(t._s(t.leaveDetail.employee))])]),t._v(" "),s("div",{staticClass:"column"},[s("h4",{staticClass:"has-text-black"},[t._v("Date Submitted")]),t._v(" "),s("h4",{staticClass:"has-text-grey-light"},[t._v(t._s(t._f("dateFormat")(t.leaveDetail.createdAt)))])]),t._v(" "),s("div",{staticClass:"column"},[s("h4",{staticClass:"has-text-black"},[t._v("Leave Type")]),t._v(" "),s("h4",{staticClass:"has-text-grey-light"},[t._v(t._s(t.leaveDetail.leaveType))])]),t._v(" "),t._m(0)]),t._v(" "),s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("h4",{staticClass:"has-text-black"},[t._v("Start Date")]),t._v(" "),s("h4",{staticClass:"has-text-grey-light"},[t._v(t._s(t._f("dateFormat")(t.leaveDetail.startDate)))])]),t._v(" "),s("div",{staticClass:"column"},[s("h4",{staticClass:"has-text-black"},[t._v("End Date")]),t._v(" "),s("h4",{staticClass:"has-text-grey-light"},[t._v(t._s(t._f("dateFormat")(t.leaveDetail.endDate)))])]),t._v(" "),s("div",{staticClass:"column"},[s("h4",{staticClass:"has-text-black"},[t._v("Days To End Date")]),t._v(" "),s("h4",{staticClass:"has-text-grey-light"},[t._v(t._s(t.daysToEndDate))])]),t._v(" "),s("div",{staticClass:"column"},[s("h4",{staticClass:"has-text-black"},[t._v("Reason")]),t._v(" "),s("h4",{staticClass:"has-text-grey-light"},[t._v(t._s(t.leaveDetail.status))])])]),t._v(" "),s("div",{staticClass:"columns"},[s("div",{staticClass:"column"},[s("h4",{staticClass:"has-text-black"},[t._v("Leave Balance")]),t._v(" "),s("h4",{staticClass:"has-text-grey-light"},[t._v(t._s(t.leaveBalance)+" days")])]),t._v(" "),s("div",{staticClass:"column"},[s("h4",{staticClass:"has-text-black"},[t._v("Balance After Approval")]),t._v(" "),s("h4",{staticClass:"has-text-grey-light"},[t._v(t._s(t.balanceAfterApproval))])]),t._v(" "),s("div",{staticClass:"column"},[s("h4",{staticClass:"has-text-black"},[t._v("Leave Period in Days")]),t._v(" "),s("h4",{staticClass:"has-text-grey-light"},[t._v(t._s(t.leaveDetail.numberOfDays))])]),t._v(" "),t._m(1)]),t._v(" "),s("div",{staticClass:"flex justify-center"},[s("button",{staticClass:"button is-primary is-rounded is-small mr-5",on:{click:t.confirmApproval}},[s("span",[t._v("\n\t\t\t\t\t\tApprove\n                    ")])]),t._v(" "),s("button",{staticClass:"button is-rounded is-light is-small",on:{click:t.openRejectDialog}},[s("span",[t._v("\n\t\t\t\t\t\tReject\n                    ")])])])]),t._v(" "),t._m(2),t._v(" "),s("LeaveRequestHistoryList")],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"column"},[e("h4",{staticClass:"has-text-black"},[this._v("Status")]),this._v(" "),e("h4",{staticClass:"has-text-grey-light"},[this._v("Status")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"column"},[e("h4",{staticClass:"has-text-black"},[this._v("Employee Department")]),this._v(" "),e("h4",{staticClass:"has-text-grey-light"},[this._v("Status")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mt-1 bg-white"},[e("div",{staticClass:"tabs"},[e("ul",[e("li",{staticClass:"is-active"},[e("a",[this._v("Leave Request History")])])])])])}],!1,null,null,null);e.default=n.exports},77:function(t,e){function s(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}s.keys=function(){return[]},s.resolve=s,t.exports=s,s.id=77},82:function(t,e,s){"use strict";var a={},i=s(2),n=Object(i.a)(a,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bg-white  min-h-full p-5 flex justify-center align-center"},[e("div",[e("img",{attrs:{src:"/images/undraw_no_data_qbuo.svg",width:"200px",alt:"empty state here"}}),this._v(" "),e("div",{staticClass:"mt-3 flex flex-col justify-center has-text-grey-light"},[this._t("default")],2)])])},[],!1,null,null,null);e.a=n.exports},92:function(t,e,s){},93:function(t,e,s){t.exports=function(t){var e={};function s(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=t,s.c=e,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/dist/",s(s.s=74)}({0:function(t,e,s){"use strict";function a(t,e,s,a,i,n,l,o){var r,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=s,c._compiled=!0),a&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),l?(r=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(l)},c._ssrRegister=r):i&&(r=o?function(){i.call(this,this.$root.$options.shadowRoot)}:i),r)if(c.functional){c._injectStyles=r;var u=c.render;c.render=function(t,e){return r.call(e),u(t,e)}}else{var v=c.beforeCreate;c.beforeCreate=v?[].concat(v,r):[r]}return{exports:t,options:c}}s.d(e,"a",function(){return a})},14:function(t,e){t.exports=s(25)},23:function(t,e){t.exports=s(28)},7:function(t,e){t.exports=s(0)},74:function(t,e,s){"use strict";s.r(e);var a=s(7),i=s.n(a),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"el-message-fade"},on:{"after-leave":t.handleAfterLeave}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],class:["el-message",t.type&&!t.iconClass?"el-message--"+t.type:"",t.center?"is-center":"",t.showClose?"is-closable":"",t.customClass],style:t.positionStyle,attrs:{role:"alert"},on:{mouseenter:t.clearTimer,mouseleave:t.startTimer}},[t.iconClass?s("i",{class:t.iconClass}):s("i",{class:t.typeClass}),t._t("default",[t.dangerouslyUseHTMLString?s("p",{staticClass:"el-message__content",domProps:{innerHTML:t._s(t.message)}}):s("p",{staticClass:"el-message__content"},[t._v(t._s(t.message))])]),t.showClose?s("i",{staticClass:"el-message__closeBtn el-icon-close",on:{click:t.close}}):t._e()],2)])};n._withStripped=!0;var l={success:"success",info:"info",warning:"warning",error:"error"},o={data:function(){return{visible:!1,message:"",duration:3e3,type:"info",iconClass:"",customClass:"",onClose:null,showClose:!1,closed:!1,verticalOffset:20,timer:null,dangerouslyUseHTMLString:!1,center:!1}},computed:{typeClass:function(){return this.type&&!this.iconClass?"el-message__icon el-icon-"+l[this.type]:""},positionStyle:function(){return{top:this.verticalOffset+"px"}}},watch:{closed:function(t){t&&(this.visible=!1)}},methods:{handleAfterLeave:function(){this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},close:function(){this.closed=!0,"function"==typeof this.onClose&&this.onClose(this)},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var t=this;this.duration>0&&(this.timer=setTimeout(function(){t.closed||t.close()},this.duration))},keydown:function(t){27===t.keyCode&&(this.closed||this.close())}},mounted:function(){this.startTimer(),document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)}},r=s(0),c=Object(r.a)(o,n,[],!1,null,null,null);c.options.__file="packages/message/src/main.vue";var u=c.exports,v=s(14),h=s(23),f=i.a.extend(u),d=void 0,p=[],_=1,m=function t(e){if(!i.a.prototype.$isServer){"string"==typeof(e=e||{})&&(e={message:e});var s=e.onClose,a="message_"+_++;e.onClose=function(){t.close(a,s)},(d=new f({data:e})).id=a,Object(h.isVNode)(d.message)&&(d.$slots.default=[d.message],d.message=null),d.$mount(),document.body.appendChild(d.$el);var n=e.offset||20;return p.forEach(function(t){n+=t.$el.offsetHeight+16}),d.verticalOffset=n,d.visible=!0,d.$el.style.zIndex=v.PopupManager.nextZIndex(),p.push(d),d}};["success","warning","info","error"].forEach(function(t){m[t]=function(e){return"string"==typeof e&&(e={message:e}),e.type=t,m(e)}}),m.close=function(t,e){for(var s=p.length,a=-1,i=0;i<s;i++)if(t===p[i].id){a=i,"function"==typeof e&&e(p[i]),p.splice(i,1);break}if(!(s<=1||-1===a||a>p.length-1))for(var n=p[a].$el.offsetHeight,l=a;l<s-1;l++){var o=p[l].$el;o.style.top=parseInt(o.style.top,10)-n-16+"px"}},m.closeAll=function(){for(var t=p.length-1;t>=0;t--)p[t].close()};var y=m;e.default=y}})},96:function(t,e,s){"use strict";(function(t){s(92),s(23);var a=s(93),i=s.n(a),n=s(139);e.a={components:{LeaveRequestHistoryList:n.a},data:()=>({leaveDetail:{},leaveId:!1}),created(){this.leaveId=this.$route.params.id,this.getLeaveDetails()},methods:{getLeaveDetails(){let t=this.$route.params.id,e=this;axios.get(`/api/user/leave-requests/${t}`).then(t=>{e.leaveDetail=t.data})},getDateDiffence(e,s){let a=t(e),i=t(s);return a.diff(i,"days")},confirmApproval(){this.$buefy.dialog.confirm({title:"Leave Approve",confirmText:"Approve",message:"Are you sure want to approve for this leave?",onConfirm:()=>this.approveLeave()})},openRejectDialog(){this.$buefy.dialog.prompt({message:"Add Comment (Optional)",confirmText:"Proceed",inputAttrs:{placeholder:"e.g. Walter",required:!1},trapFocus:!0,onConfirm:t=>this.$buefy.toast.open(`Your name is: ${t}`)})},approveLeave(){axios.post(`/api/leave-request-approvals/${this.leaveId}`).then(t=>{i.a.success(t.data.message)},t=>{})},rejectLeaveApproval(t){axios.post(`/api/user/leave-approvals/accept/${this.leaveId}`,{params:{comment:t}}).then(t=>{this.$buefy.toast.open("User confirmed")},t=>{})}},computed:{daysToEndDate(){return this.getDateDiffence(this.leaveDetail.endDate,new Date)},leaveBalance(){return this.leaveDetail.elligibleDays-this.leaveDetail.daysUsed},balanceAfterApproval(){return this.leaveBalance-this.leaveDetail.numberOfDays}},filters:{dateFormat:e=>t(e).format("DD-MM-YYYY")}}}).call(this,s(72))},97:function(t,e,s){"use strict";(function(t){var a=s(82);e.a={components:{EmptyState:a.a},data:()=>({leaveRequestHistory:[],loaded:!1}),created(){this.getLeaveHistory()},methods:{getLeaveHistory(){let t=this.$route.params.id;axios.get(`/api/leave-request-history/${t}`).then(t=>{this.leaveRequestHistory=t.data,this.loaded=!0})}},computed:{showEmptyState(){return this.loaded&&this.leaveRequestHistory.length<=0}},filters:{dateFormat:e=>t(e).format("DD-MM-YYYY")}}}).call(this,s(72))}}]);