(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{173:function(t,e){function a(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}a.keys=function(){return[]},a.resolve=a,t.exports=a,a.id=173},220:function(t,e,a){var s=a(283);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,a(27).default)("9a003a2c",s,!0,{})},281:function(t,e,a){"use strict";(function(t){var s=a(190);const i=a(191).Stomp;e.a={formatToCurrency:function(t){return t.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")},formattedTime:function(){return t(value).format("LT")},formattedDate:function(){return t(value).format("LLL")},sockJsConnection:function(){let t=new s("/web-chat");return i.over(t)},registerServiceWorker:()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then((function(t){console.log("ServiceWorker registration successful with scope: ",t.scope)}),(function(t){console.log("ServiceWorker registration failed: ",t)}))},unregisterServiceWorker:function(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(t=>{t.unregister()})}}}).call(this,a(172))},282:function(t,e,a){"use strict";var s=a(220);a.n(s).a},283:function(t,e,a){(t.exports=a(26)(!1)).push([t.i,".navbar-item .profile-image[data-v-2b85a4ee]{height:36px;width:36px;max-height:36px}.toggle-mobile-nav[data-v-2b85a4ee]{background-color:transparent;border:0px;padding:6px 16px;margin:0 0 0 -15px;height:46px}.menu-wrapper[data-v-2b85a4ee]{overflow-y:scroll;position:relative;height:100%;margin-top:2rem}.side-menu-portal-target[data-v-2b85a4ee]{display:revert}\n",""])},346:function(t,e,a){"use strict";a.r(e);a(170),a(73);var s=a(171),i=a.n(s),n=a(174),o=a.n(n),r={data:()=>({csrfToken:null}),created(){this.csrfToken=document.querySelector("meta[name='_csrf']").getAttribute("content")},methods:{logout(){this.$refs.logoutForm.submit()}}},c=a(20),l=Object(c.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("b-tooltip",{attrs:{label:"logout",type:"is-dark",position:"is-left"}},[e("form",{ref:"logoutForm",attrs:{method:"post",action:"/logout"}},[e("input",{attrs:{type:"hidden",name:"_csrf"},domProps:{value:this.csrfToken}}),this._v(" "),e("i",{staticClass:"fa fa-sign-out fa-2x",on:{click:this.logout}})])])}),[],!1,null,null,null).exports,u=a(28),v=a(281),d=a(192);a(198);const f=d.initializeApp({apiKey:"AIzaSyBIYobc3LT6thrDfJlBC6w-ml8p9FD5Alg",authDomain:"shoppingcart-71cf0.firebaseapp.com",databaseURL:"https://shoppingcart-71cf0.firebaseio.com",projectId:"shoppingcart-71cf0",storageBucket:"shoppingcart-71cf0.appspot.com",messagingSenderId:"769269932934",appId:"1:769269932934:web:24588a95d176bd3c1e0207"}).messaging();function b(t){axios.post("/notification/firebase/subscribe",{token:t}).then(t=>{console.log("subscriptions successful")})}f.onTokenRefresh(()=>{f.getToken().then(t=>{b(t)}).catch(t=>{console.log("Unable to retrieve refreshed token ",t)})}),f.onMessage(t=>{console.log("Firebase Message",t),i.a.info(t.data.body)});var p={subscribeToFirebaseMessages:b,askForPermissionToReceiveNotifications:()=>{if("granted"==Notification.permission)return console.log("A user has already subscribed for notifications"),Promise.resolve("");return f.getToken().then(t=>(t||console.log("No Instance ID token available. Request permission to generate one."),t))}};function h(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?h(Object(a),!0).forEach((function(e){o()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}let g;var _={props:{user:{}},components:{PasswordResetForm:()=>Promise.all([a.e(0),a.e(74)]).then(a.bind(null,435)),NotificationDropDown:()=>Promise.all([a.e(0),a.e(32)]).then(a.bind(null,385)),LogoutForm:l},data:()=>({showNotifications:!1,isFullPage:!0,showChangePassword:!1,loading:!1}),computed:m({},Object(u.c)(["authenticatedUser"])),methods:m(m({},Object(u.b)(["setUser"])),{},{hideNotifications(){this.showNotifications=!1},handleSockJsSubscriptions(t){let e=this;t.connect({},(function(e){t.subscribe("/user/queue/notifications",(function(t){JSON.parse(t.body);i.a.success(t.body)})),t.subscribe("/user/topic/notifications",(function(t){i.a.info(t.body)})),t.subscribe("/swat-chat/user-notifications-me",(function(t){i.a.info(t.body)}))}),(function(){window.setTimeout((function(){let t=v.a.sockJsConnection();e.handleSockJsSubscriptions(t)}),2e3)}))}}),created(){let t=this;v.a.registerServiceWorker(),p.askForPermissionToReceiveNotifications().then(t=>{console.log("Firebase subscription token is dashboard",t),t&&p.subscribeToFirebaseMessages(t)});try{let e=v.a.sockJsConnection();t.handleSockJsSubscriptions(e)}catch(t){}this.setUser(JSON.parse(this.user))},directives:{closable:{bind(t,e,a){g=s=>{s.stopPropagation();const{handler:i,exclude:n}=e.value;let o=!1;n.forEach(t=>{if(!o){const e=a.context.$refs[t];o=e.contains(s.target)}}),t.contains(s.target)||o||a.context[i]()},document.addEventListener("click",g),document.addEventListener("touchstart",g)},unbind(){document.removeEventListener("click",g),document.removeEventListener("touchstart",g)}}}},w=(a(282),Object(c.a)(_,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"navbar is-fixed-top is-primary",attrs:{role:"navigation","aria-label":"main navigation"}},[t._m(0),t._v(" "),a("div",{staticClass:"navbar-menu",attrs:{id:"navbarBasicExample"}},[t._m(1),t._v(" "),a("div",{staticClass:"navbar-end"},[a("a",{ref:"notification-toggle",staticClass:"navbar-item is-hoverable is-relative",on:{click:function(e){t.showNotifications=!0}}},[a("i",{staticClass:"fa fa-bell"}),t._v(" "),t.showNotifications?a("NotificationDropDown",{directives:[{name:"closable",rawName:"v-closable",value:{exclude:["notification-toggle"],handler:"hideNotifications"},expression:"{\n  exclude: ['notification-toggle'],\n  handler: 'hideNotifications'\n}"}]}):t._e()],1),t._v(" "),t._m(2),t._v(" "),a("div",{staticClass:"navbar-item"},[a("LogoutForm")],1),t._v(" "),a("div",{staticClass:"navbar-item has-dropdown is-hoverable"},[t._m(3),t._v(" "),a("div",{staticClass:"navbar-dropdown is-right"},[a("a",{staticClass:"navbar-item"},[a("article",{staticClass:"media"},[t._m(4),t._v(" "),a("div",{staticClass:"media-content"},[a("div",{staticClass:"content"},[a("p",[a("strong",[t._v(t._s(t.authenticatedUser.fullName))])])])])])]),t._v(" "),a("router-link",{staticClass:"navbar-item",attrs:{to:"/profile"}},[t._v("\n              Profile\n            ")]),t._v(" "),a("router-link",{staticClass:"navbar-item",attrs:{to:"/settings"}},[t._v("\n              Settings\n            ")]),t._v(" "),a("a",{staticClass:"navbar-item",on:{click:function(e){t.showChangePassword=!0}}},[t._v("\n              Change Password\n            ")]),t._v(" "),a("a",{staticClass:"navbar-item"},[t._v("\n              Logout\n            ")])],1)])])])]),t._v(" "),t.showChangePassword?a("PasswordResetForm",{on:{close:function(e){t.showChangePassword=!1}}}):t._e(),t._v(" "),a("router-view")],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"navbar-brand"},[e("a",{staticClass:"navbar-item",attrs:{href:"https://bulma.io"}},[e("img",{attrs:{src:"https://bulma.io/images/bulma-logo.png",width:"112",height:"28"}})]),this._v(" "),e("a",{staticClass:"navbar-burger burger",attrs:{role:"button","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"}},[e("span",{attrs:{"aria-hidden":"true"}}),this._v(" "),e("span",{attrs:{"aria-hidden":"true"}}),this._v(" "),e("span",{attrs:{"aria-hidden":"true"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"navbar-start"},[a("a",{staticClass:"navbar-item"},[t._v("\n          Home\n        ")]),t._v(" "),a("a",{staticClass:"navbar-item"},[t._v("\n          Documentation\n        ")]),t._v(" "),a("div",{staticClass:"navbar-item has-dropdown is-hoverable"},[a("a",{staticClass:"navbar-link"},[t._v("\n            More\n          ")]),t._v(" "),a("div",{staticClass:"navbar-dropdown"},[a("a",{staticClass:"navbar-item"},[t._v("\n              About\n            ")]),t._v(" "),a("a",{staticClass:"navbar-item"},[t._v("\n              Jobs\n            ")]),t._v(" "),a("a",{staticClass:"navbar-item"},[t._v("\n              Contact\n            ")]),t._v(" "),a("hr",{staticClass:"navbar-divider"}),t._v(" "),a("a",{staticClass:"navbar-item"},[t._v("\n              Report an issue\n            ")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"navbar-item"},[e("i",{staticClass:"fa fa-envelope"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("figure",{staticClass:"image is-fullwidth navbar-link"},[e("img",{staticClass:"is-rounded profile-image",attrs:{src:"https://bulma.io/images/placeholders/128x128.png"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("figure",{staticClass:"media-left"},[e("p",{staticClass:"image is-32x32"},[e("img",{staticClass:"is-rounded",attrs:{src:"https://bulma.io/images/placeholders/128x128.png"}})])])}],!1,null,"2b85a4ee",null));e.default=w.exports}}]);